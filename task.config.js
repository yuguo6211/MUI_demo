const PC = require('./project.config');
const Vendor = require('./vendor.config');

/**
 * 任务配置 命令 + 提示信息
 */
const tasks = {
  'clear': {
    cmd: 'rm -rf ' + PC.assets.dist,
    tip: '清空目标文件夹'
  },
  'clear:js': {
    cmd: 'rm -rf ' + PC.js.dist,
    tip: '清空JS文件目标文件夹',
    ignore: true
  },
  'clear:css': {
    cmd: 'rm -rf ' + PC.css.dist,
    tip: '清空CSS文件目标文件夹',
    ignore: true
  },
  'eslint': {
    cmd: 'eslint ' + PC.eslint.src,
    tip: '语法检测',
    ignore: true
  },
  'test': {
    cmd: 'ava ' + PC.test.src,
    tip: '单元测试',
    ignore: true
  },
  'doc': {
    cmd:  'jsdoc ' + PC.js.doc.src + ' -c ' + PC.js.doc.conf,
    tip: '文档生成',
    ignore: true
  },
  /*'babel': {
    cmd: 'babel ' + PC.js.src + ' -d ' + PC.js.dist,
    tip: 'bable ES6转换ES5'
  },*/
  'webpack': {
    cmd: 'webpack',
    tip: 'webpack 打包JS'
  },
  /*'minify:js': {
    cmd: 'node tool/minify_js.js',
    tip: 'JS 压缩'
  },*/
  'mock': {
    cmd: 'node tool/mock.js',
    tip: 'Mock 数据',
    ignore: true
  },
  'vendor:js': {
    cmd: 'uglifyjs  ' + Vendor.js + ' dist/js/common.js -o ' + PC.js.vendor.dist + ' --compress',
    tip: '公共 JS 打包压缩'
  },
  'sass': {
    cmd: 'node-sass  --output-style compressed ' + PC.css.src + ' -o ' + PC.css.dist,
    tip: 'Sass预处理'
  },
  'concat:css': {
    cmd: 'node tool/concat_css.js',
    tip: 'CSS 合并'
  },
  'vendor:css': {
    cmd: 'cat  ' + Vendor.css + ' dist/css/common/* | cleancss -o  dist/vendor.min.css --s0',
    tip: '公共 CSS 打包压缩'
  }
  
}


/**
 * 任务组合
 */
const group = {
  "css": ['sass', 'concat:css'],
  "js": ['webpack'],
  "test": ['eslint', "test"]
}

module.exports = {
  tasks: tasks,
  group: group
}
